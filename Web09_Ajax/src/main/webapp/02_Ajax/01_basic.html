<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ajax</title>
</head>
<body>
	<!-- 
	* Ajax :Asynchronous JavaScript and XML
	- Ajax 사용 이유
	1) 웹 페이지가 로드된 후 서버에서 데이터를 불러오기 위해
	2) 새로고침 없이 페이지를 업데이트
	3) 백그라운드에서 웹 서버에 데이터 전송
	
	* XML(Extensible Markup Language)
	
	 -->
	<div id="output">
		<h2>XMLHttpRequest Object</h2>
		<button type="button" onclick="loadDoc()">change</button>
	</div>
	<script type="text/javascript">
	
		function loadDoc() { // callback interface와 유사... button onclick...
			var xhttp = new XMLHttpRequest(); // 브라우저 내장 request 객체
						
			xhttp.onreadystatechange = function() { // EventHandler와 유사...  callback...				
				// readyState 속성이 변경될 때 호출할 함수 정의
				if(this.readyState == 4 && this.status == 200) {
					console.log(this);
					document.getElementById("output").innerHTML = this.responseText;
					// this안에 text를 가지고 돌려준대 Ajax -> jsp로 ...
					
					// this.responseText : 응답 데이터를 문자열로 변환					
				}				
			}; // end function(onreadystatechange) 
			
			// Ajax도 한번 수행되면 연결 끝! stateless... 
			
			xhttp.open("GET", "01_demo_test.txt", true); // 가져와서 불러와야만 실행 시점!
			// open(method, url, async) : xhttp에 보낼 정보 세팅
			// method : 요청 타입 GET or POST
			// url : 파일 또는 요청 서버 위치
			// async : true(비동기) or false(동기)
			xhttp.send(); // 보내고 위에 function loadDoc로 위로 보낸다. 
			// 시점이 위 펑션에서부터 되는거 ㄴㄴㄴㄴㄴㄴ
			
		} // end function
				
	</script>

</body>
</html>